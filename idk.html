<div id="searchs"></div>
<script type="text/javascript" src="CSVparser.js"></script>
<script type="module">
  // localStorage.clear();
  if (localStorage.getItem("headers") === null || localStorage.getItem("rows") === null) {
    const [headers, rows] = await getCSV();
    localStorage.setItem("headers", JSON.stringify(headers));
    localStorage.setItem("rows", JSON.stringify(rows));
  } else {
    const headers = JSON.parse(localStorage.getItem("headers"));
    var rows = JSON.parse(localStorage.getItem("rows"));
  }
  var titles = [rows.map(row => row[0]), []];
  function search(titles, searchValue) {
    var results = [];
    for (let i = 0; i < titles[0].length; i++) {
      if (titles[0][i].toLowerCase().includes(searchValue.toLowerCase())) {
        results.push(titles[0][i]);
      }
    }
    if (results.length === 0) {
      return "No results found";
    } else {
      return results;
    }
  }
  const params = new URLSearchParams(window.location.search);
  const searchValue = params.get("search");
  if (searchValue !== null) {
    console.log(searchValue);
    var x = search(titles, searchValue)
    console.log(x);
  }
</script>
<script>
  function output(x) {
      console.log(x);
      document.getElementById("output").innerHTML = x;
      return true;
  }
</script>
<form onsubmit="return output(input.value)">
  <input type="text" id="searchInput" name="search" placeholder="Search for a song">
  <input type="submit" id="submitButton" value="Search">
</form>
<script>
  // get searh variable from url
  // if search isnt empty then console.log(search)
  
</script>
<output id="output"></output>

<style>
  input[id="searchInput"] {
        background-color: #241227;
        padding: 5px;
        border-radius: 30px;
        border-color: #FF6ED9;
        border-style: dotted;
        margin: 10px;
        cursor: default;
        color: #FF6ED9;
        font-size: 20px;
        text-align: left;
        height: 50px;
        width: 350px;
  }
  input[id="submitButton"] {
    background-color: #241227;
    padding: 5px;
    border-radius: 30px;
    border-color: #FF6ED9;
    border-style: dotted;
    margin: 10px;
    cursor: hand;
    color: #FF6ED9;
    font-size: 20px;
    width: 100px;
    height: 50px;
  }
  body {
        background-color: #241227;
        color: #FF6ED9;
  }
  ::-webkit-scrollbar {
    width: 15px;
    background: #381D3C;
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb {
    background: #FF6ED9;
    border-radius: 10px;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: #f18cd7;
    border-radius: 10px;
  }
</style>
<br>
<br>